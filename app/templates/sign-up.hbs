<div class="nano-panel">
  <div class="col">
    <h2>Sign Up</h2>

    {{#if errorString}}
      <div class="alert alert-danger">{{errorString}}</div>
    {{/if}}
    {{#if errorObject}}
      <div class="alert alert-danger">
        <ul>
          {{#each-in error as |key messages|}}
            <li>
              {{key}}
              <ul>
                {{#each messages as |message|}}
                  <li>{{message}}</li>
                {{/each}}
              </ul>
            </li>
          {{/each-in}}
        </ul>
      </div>
    {{/if}}

    {{#form-for
      afterError=(action (mut error))
      model=signUpAttempt
      steps=steps
      as |f|
    }}

      {{#if (eq f.currentStepIndex 0)}}

        <div class="form-group">
          {{f.input
            autocomplete="email"
            autofocus=true
            label="Email"
            placeholder="user@domain.com"
            property="email"
            type="email"
          }}
        </div>
        <div class="form-group">
          {{f.input
            autocomplete="new-password"
            label="Password"
            property="password"
            type="password"
          }}
        </div>

      {{else}}

        <div class="form-group">
          {{f.input
            autocomplete="username"
            label="Username"
            property="username"
          }}
        </div>
        <div class="form-group">
          {{validated-time-zone
            errors=changeset.errors
            hasAttemptedSubmit=hasAttemptedSubmit
            value=changeset.timeZone
          }}
        </div>

      {{/if}}

      <input data-test-sign-up-submit type="submit" class="btn btn-primary" value={{if f.isLastStep "Sign Up" "Continue"}} />

    {{/form-for}}

    <hr />

    <p>{{link-to 'Sign In' 'sign-in'}}</p>
  </div>
</div>
